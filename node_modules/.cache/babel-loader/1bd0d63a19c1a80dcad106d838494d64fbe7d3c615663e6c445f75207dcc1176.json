{"ast":null,"code":"import _regeneratorRuntime from\"D:/Git/react_weather_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"D:/Git/react_weather_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/Git/react_weather_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{DateTime}from\"luxon\";var API_KEY='868f1076d62debf814f899677ab246e4';var BASE_URL='https://api.openweathermap.org/data/2.5';//https://api.openweathermap.org/data/2.5/weather?q={city name}&appid={API key}\nvar getFormattedData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(city,units){var currentWeather,lon,lat,hourlyforcast;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getCurrentWeather('weather',city);case 2:currentWeather=_context.sent;// console.log(currentWeather)\nlon=currentWeather.coord.lon;lat=currentWeather.coord.lat;//https://api.openweathermap.org/data/3.0/onecall?lat={lat}&lon={lon}&exclude={part}&appid={API key}\n_context.next=7;return getCurrentWeather('onecall',{lat:lat,lon:lon,exclude:'current,minutely,alerts',units:units}).then(formatForecast);case 7:hourlyforcast=_context.sent;console.log(hourlyforcast);return _context.abrupt(\"return\",_objectSpread(_objectSpread({},hourlyforcast),currentWeather));case 10:case\"end\":return _context.stop();}},_callee);}));return function getFormattedData(_x,_x2){return _ref.apply(this,arguments);};}();var getCurrentWeather=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(option,city){var url,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:url=new URL(BASE_URL+'/'+option);url.search=new URLSearchParams(_objectSpread(_objectSpread({},city),{},{appid:API_KEY}));_context2.next=4;return fetch(url);case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:return _context2.abrupt(\"return\",_context2.sent);case 8:case\"end\":return _context2.stop();}},_callee2);}));return function getCurrentWeather(_x3,_x4){return _ref2.apply(this,arguments);};}();var formatForecast=function formatForecast(data){console.log(data);var timezone=data.timezone,daily=data.daily,hourly=data.hourly;daily=daily.slice(0,5).map(function(item){return{title:luxonFormatToLocalTime(item.dt,timezone,'ccc'),temp:item.temp.day,icon:item.weather[0].icon};});hourly=hourly.slice(0,5).map(function(item){return{title:luxonFormatToLocalTime(item.dt,timezone,'hh:mm a'),temp:item.temp,icon:item.weather[0].icon};});return{timezone:timezone,daily:daily,hourly:hourly};};var luxonFormatToLocalTime=function luxonFormatToLocalTime(secs,zone){var format=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"cccc, dd LLL yyyy' | Local time: 'hh:mm a\";return DateTime.fromSeconds(secs).setZone(zone).toFormat(format);};var iconUrl=function iconUrl(code){return\"https://openweathermap.org/img/wn/\".concat(code,\"@2x.png\");};// const formatCurrentWeather=(data)=>{\n//    const {\n//     name,dt,\n//     coord:{lat,lon},\n//     main:{feels_like,temp,temp_min,temp_max,humidity,pressure},\n//     wind:{speed},\n//     sys:{country, sunrise,sunset},\n// } =  data\n// const {main,icon,description} = data.weather[0]\n// return {name,dt,lat,lon,feels_like,temp,temp_min,temp_max,humidity,pressure,speed,country, sunrise,sunset,main,icon,description}\n// }\nexport{iconUrl,luxonFormatToLocalTime};export default getFormattedData;","map":{"version":3,"names":["DateTime","API_KEY","BASE_URL","getFormattedData","city","units","getCurrentWeather","currentWeather","lon","coord","lat","exclude","then","formatForecast","hourlyforcast","console","log","option","url","URL","search","URLSearchParams","appid","fetch","response","json","data","timezone","daily","hourly","slice","map","item","title","luxonFormatToLocalTime","dt","temp","day","icon","weather","secs","zone","format","fromSeconds","setZone","toFormat","iconUrl","code"],"sources":["D:/Git/react_weather_app/src/apiservices/weatherapi.js"],"sourcesContent":["import { DateTime } from \"luxon\"\r\n\r\nconst API_KEY ='868f1076d62debf814f899677ab246e4'\r\nconst BASE_URL = 'https://api.openweathermap.org/data/2.5'\r\n\r\n//https://api.openweathermap.org/data/2.5/weather?q={city name}&appid={API key}\r\n\r\nconst getFormattedData = async (city,units)=>{\r\n    const currentWeather = await getCurrentWeather('weather',city)\r\n    // console.log(currentWeather)\r\n   const lon = currentWeather.coord.lon\r\n const lat = currentWeather.coord.lat\r\n\r\n //https://api.openweathermap.org/data/3.0/onecall?lat={lat}&lon={lon}&exclude={part}&appid={API key}\r\n const hourlyforcast = await getCurrentWeather('onecall', {\r\n    lat,lon,exclude:'current,minutely,alerts',\r\n    units:units\r\n }).then(formatForecast)\r\n console.log(hourlyforcast)\r\n    return {...hourlyforcast,...currentWeather}\r\n}\r\n\r\nconst getCurrentWeather = async (option,city)=>{\r\n    const url = new URL(BASE_URL + '/' + option);\r\n    url.search = new URLSearchParams({...city,appid:API_KEY})\r\n\r\n    const response = await fetch(url);\r\n    return await response.json();\r\n}\r\nconst formatForecast=(data)=>{\r\n    console.log(data)\r\n    let {timezone,daily,hourly} = data\r\n    daily = daily.slice(0,5).map(item=>{\r\n        return {\r\n           title: luxonFormatToLocalTime(item.dt, timezone, 'ccc'),\r\n           temp: item.temp.day,\r\n           icon:item.weather[0].icon\r\n\r\n        }\r\n    })\r\n    hourly = hourly.slice(0,5).map(item=>{\r\n        return {\r\n           title: luxonFormatToLocalTime(item.dt, timezone, 'hh:mm a'),\r\n           temp: item.temp,\r\n           icon:item.weather[0].icon\r\n\r\n        }\r\n    })\r\nreturn {timezone,daily,hourly}\r\n}\r\n\r\n\r\nconst luxonFormatToLocalTime = (secs,zone,format = \"cccc, dd LLL yyyy' | Local time: 'hh:mm a\")=>DateTime.fromSeconds(secs).setZone(zone).toFormat(format)\r\n\r\nconst iconUrl = (code)=>`https://openweathermap.org/img/wn/${code}@2x.png`\r\n// const formatCurrentWeather=(data)=>{\r\n//    const {\r\n//     name,dt,\r\n//     coord:{lat,lon},\r\n//     main:{feels_like,temp,temp_min,temp_max,humidity,pressure},\r\n//     wind:{speed},\r\n//     sys:{country, sunrise,sunset},\r\n// } =  data\r\n// const {main,icon,description} = data.weather[0]\r\n\r\n// return {name,dt,lat,lon,feels_like,temp,temp_min,temp_max,humidity,pressure,speed,country, sunrise,sunset,main,icon,description}\r\n// }\r\n\r\n\r\nexport{iconUrl,luxonFormatToLocalTime}\r\n\r\nexport default getFormattedData;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}